<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#">

<head>
    <title></title>
    <meta property="og:url" content="http://www.your-domain.com/your-page.html" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Your Website Title" />
    <meta property="og:description" content="Your description" />
    <meta property="og:image" content="http://www.your-domain.com/path/image.jpg" />
    <!-- //////////////////////////BOOTSTRAP -->
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"> -->
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css"> -->
    <!-- //////////////////////////FONT AWESOME -->
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/admin.css">
    <link rel="stylesheet" type="text/css" href="../css/admin.css">
    <link rel="stylesheet" type="text/css" href="../css/map.css">
    <link rel="stylesheet" type="text/css" href="../css/cart.css">
    <link rel="stylesheet" type="text/css" href="../css/thumbs.css">
    <link rel="stylesheet" type="text/css" href="../css/product-page.css">
    <link rel="stylesheet" type="text/css" href="../css/info-prod.css">
    <link rel="stylesheet" type="text/css" href="../css/digital.css">
    <link rel="stylesheet" type="text/css" href="../css/coupon.css">
    <script src="../js/main.js"></script>
    <script type="text/javascript" src="https://cdn.rawgit.com/metaschema/browser/master/metaschema.js"></script>
    <script src="../js/mainh.js"></script>
    <!--<script src="http://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places"></script>-->
    <script src="../js/jquery.geocomplete.js"></script>
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta charset="utf-8" />
    <script>
        window.jsondata=%jsondata;

        function myInit() {
            document.getElementById('files').addEventListener('change', handleFileSelect, false);
            document.querySelector('.readBytesButtons').addEventListener('click', function (evt) {
                if (evt.target.tagName.toLowerCase() == 'input') {
                    var startByte = evt.target.getAttribute('data-startbyte');
                    var endByte = evt.target.getAttribute('data-endbyte');
                    readBlob(startByte, endByte);
                }
            }, false);
            if (jsondata.fromReaction) {
                document.getElementById('form-coupon-container').style.height = "260%";
                document.getElementById('textarea-apivenditore').value = jsondata.vendor;
                document.getElementById('textarea-nomeprodotto').value = jsondata.title;
                document.getElementById('textarea-valore').value = jsondata.variants[0].price;
                document.getElementById('textarea-nomeprodotto').value = jsondata.title;
                document.getElementById('textarea-indirizzo').value = jsondata.description;
                document.getElementById('textarea-sconto').value = "";
                document.getElementById('target-totale').innerHTML = jsondata.price;
                document.getElementById('textarea-varianteprodotto').value = jsondata.pageTitle;
                document.getElementById('image-target').style.backgroundImage = "url('" + jsondata.imageUrl + "')";
                document.getElementById('image-target').style.backgroundSize = "cover";
            }
        }
    </script>
    <script>
        var price = null;

        function clearContents(element) {
            element.value = '';
        }

        function makeCoupon() {
            window.lastTitle = document.getElementById('textarea-nomeprodotto').value;
            window.lastSubtitle = document.getElementById('textarea-varianteprodotto').value
            window.lastDescription = document.getElementById('textarea-indirizzo').value;
            window.lastVendor = document.getElementById('textarea-apivenditore').value;
            window.lastValue = document.getElementById('textarea-valore').value;
            window.lastPrice = document.getElementById('target-totale').value;
            window.lastDiscount = document.getElementById('textarea-sconto').value;
            window.lastSaving = (lastValue / 100) * lastDiscount;
           /* if (document.getElementById('image-target').style.backgroundImage) {
                window.productImageUrl = document.getElementById('image-target').style.backgroundImage;
            } else {
                alert('immagine mancante!');
                return false
            }*/
            window.couponData = {
                'title': lastTitle,
                'subtitle': lastSubtitle,
                'description': lastDescription,
                'vendor': lastVendor,
                'valore': lastValue,
                'price': lastPrice,
                'discount': lastDiscount,
                'saving': lastSaving
            };
        }

        function tryDiscount(value) {
            console.log(value + ' is value');
            console.log(price + ' is price');
            var discount = (price / 100) * value;
            console.log(discount + ' is discount');
            window.lastSaving = discount;
            var total = price - discount;
            console.log(total + ' is total');
            document.getElementById('target-totale').innerHTML = total;
        }
    </script>
    <script>
        function handleFileSelect(evt) {
            var files = evt.target.files; // FileList object

            // Loop through the FileList and render image files as thumbnails.
            for (var i = 0, f; f = files[i]; i++) {

                // Only process image files.
                if (!f.type.match('image.*')) {
                    continue;
                }

                var reader = new FileReader();

                // Closure to capture the file information.
                reader.onload = (function (theFile) {
                    return function (e) {
                        document.getElementById('image-target').style.backgroundImage = "url('" + e.target.result + "')";
                        // Render thumbnail.
                        /*var span = document.createElement('span');
                        span.innerHTML = ['<img style="height:100%" class="thumb" src="', e.target.result,
                                          '" title="', escape(theFile.name), '"/>'].join('');
                        document.getElementById('list').insertBefore(span, null);*/
                    };
                })(f);

                // Read in the image file as a data URL.
                reader.readAsDataURL(f);
            }
        }

        function readBlob(opt_startByte, opt_stopByte) {
            var files = document.getElementById('files').files;
            var file = filesf;
            var start = parseInt(opt_startByte) || 0;
            var stop = parseInt(opt_stopByte) || file.size - 1;

            var reader = new FileReader();

            // If we use onloadend, we need to check the readyState.
            reader.onloadend = function (evt) {
                if (evt.target.readyState == FileReader.DONE) { // DONE == 2
                    //TODO SEND evt.target.result 
                    document.getElementById('byte_content').textContent = evt.target.result;
                    document.getElementById('byte_range').textContent = ['Read bytes: ', start + 1, ' - ', stop + 1,
             ' of ', file.size, ' byte file'].join('');
                }
            };

            var blob = file.slice(start, stop + 1);
            reader.readAsBinaryString(blob);
        }
    </script>
</head>

<body onload="myInit()">
    <!--ooo.render('thumb-wrap','products-template.xml','http://emporyou.com/get_product')-->
    <div class="header-admin">
        <div class="fontlogo text-logo"><img class="logo-text" src="../img/logo-text.png" />
        </div>
    </div>
    <div id="form-coupon-container">
        <div id="title-coupon">Crea il tuo coupon</div>
        <div id="form-image-container"><img id="image-coupon" src="coupon.png" />
            <img class="logo-coupon" src="../img/logo-text-black.png" />
            <img class="icon-coupon" src="../img/logo-black.png" />
            <div id="blue-cont"></div>
            
            <div id="dotted-cont"></div>
            <div id="blue-cont-head"></div>
            <div id="vaucher-text">VAUCHER</div>
            <div class="text-info" id="text-nomeprodotto">Nome prodotto: </div>
            <div class="text-info" id="text-varianteprodotto">Altre info: </div>
            <div class="text-info" id="text-valore">Valore: €</div>
            <div class="text-info" id="text-categoria">Categoria: </div>
            <div class="text-info" id="text-sconto">Sconto: %</div>
            <div class="text-info" id="text-totale">Totale:
                <div id="target-totale">90</div>€</div>
            <div class="text-info" id="text-apivenditore">Chiave api di emporyou: </div>
            <div class="text-info" id="text-indirizzo">Descrizione Prodotto: </div>
            <div id="map-container"></div>
            <div id="map-searchbox">
                <textarea id="map-textarea"></textarea>
            </div>
            <div id="condizioni"></div>
            <form action="http://emporyou.com/api/add" method="post" target="_blank" onsubmit="makeCoupon();
document.getElementById('jsondata').value=JSON.stringify(couponData);return true;">
                <input type="hidden" id="jsondata" value="%title" name="jsondata" />
                <div id="image-cont">
                <div id="image-target"></div>
                <input type="file" id="files" name="files" multiple />
                <output id="list"></output>
                <div style="display:none" id="byte_range"></div>
                <div style="display:none" id="byte_content"></div>
                </div>
                <textarea class="info-textarea" id="textarea-indirizzo">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Praesent vestibulum molestie lacus. Aenean nonummy hendrerit mauris. Phasellus porta.</textarea>
                <textarea class="info-textarea" value="Mondobici" id="textarea-apivenditore">Mondobici</textarea>
                <textarea class="info-textarea" value="10" id="textarea-sconto" onkeyup="if(event.keyCode==13){tryDiscount(this.value);clearContents(this)};">10</textarea>
                <textarea class="info-textarea" value="100" id="textarea-valore" onkeyup="price=this.value">100</textarea>
                <textarea class="info-textarea" value="Elegante bici da città" id="textarea-varianteprodotto">Elegante bici da città</textarea>
                <textarea class="info-textarea" value="Bicicletta" id="textarea-nomeprodotto">Bicicletta</textarea>
                <select class="info-select" id="select-categoria">
                    <option>Casa</option>
                    <option>Tempo libero</option>
                    <option>Moda</option>
                    <option>Mangiare e bere</option>
                    <option>Elettronica</option>
                    <option>Bellezza</option>
                    <option>Cartoleria</option>
                    <option>Salute</option>
                    <option>Animali</option>
                </select>
                <span class="readBytesButtons">
 <input type="submit" value="FINISCI" id="send-coupon" style="display:line-block;"/>
      </span>
            </form>
            <div id="footer">
                <h2>Privacy Policy</h2>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Praesent vestibulum molestie lacus. Aenean nonummy hendrerit mauris. Phasellus porta. Fusce suscipit varius mi. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nulla dui. Fusce feugiat malesuada odio. Morbi nunc odio, gravida at, cursus nec, luctus a, lorem. Maecenas tristique orci ac sem. Duis ultricies pharetra magna. Donec accumsan malesuada orci. Donec sit amet eros. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Mauris fermentum dictum magna. Sed laoreet aliquam leo. Ut tellus dolor, dapibus eget, elementum vel, cursus eleifend, elit. Aenean auctor wisi et urna. Aliquam erat volutpat. Duis ac turpis. Integer rutrum ante eu lacus. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Praesent vestibulum molestie lacus. Aenean nonummy hendrerit mauris. Phasellus porta. Fusce suscipit varius mi. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nulla dui. Fusce feugiat malesuada odio. Morbi nunc odio, gravida at, cursus nec, luctus a, lorem. Maecenas tristique orci ac sem. Duis ultricies pharetra magna. Donec accumsan malesuada orci. Donec sit amet eros. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Mauris fermentum dictum magna. Sed laoreet aliquam leo. Ut tellus dolor, dapibus eget, elementum vel, cursus eleifend, elit. Aenean auctor wisi et urna. Aliquam erat volutpat. Duis ac turpis. Integer rutrum ante eu lacus. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Praesent vestibulum molestie lacus. Aenean nonummy hendrerit mauris. Phasellus porta.</div>
            <div id="svgcont">
                <svg id="svgg" height="100%" width="100%" viewBox="0 0 421 181" preserveAspectRatio="none">

                    <path id="Selezione" fill="#abab33" stroke="transparent" stroke-width="1" fill-opacity="1" d="M 61.00,48.27
           C 61.00,48.27 177.00,31.27 177.00,31.27
             177.00,31.27 226.00,24.13 226.00,24.13
             226.00,24.13 256.00,19.76 256.00,19.76
             256.00,19.76 264.00,17.77 264.00,17.77
             264.00,17.77 294.00,13.27 294.00,13.27
             294.00,13.27 370.00,2.00 370.00,2.00
             372.18,7.16 372.93,15.33 373.00,21.00
             373.00,21.00 376.00,76.00 376.00,76.00
             376.00,76.00 376.91,86.00 376.91,86.00
             376.91,86.00 378.00,109.00 378.00,109.00
             378.00,109.00 379.00,119.00 379.00,119.00
             379.00,119.00 379.00,129.00 379.00,129.00
             379.00,129.00 380.00,143.00 380.00,143.00
             380.00,143.00 381.00,156.00 381.00,156.00
             381.00,156.00 383.00,189.00 383.00,189.00
             383.00,189.00 346.00,189.00 346.00,189.00
             346.00,189.00 335.00,188.32 335.00,188.32
             335.00,188.32 325.00,189.00 325.00,189.00
             325.00,189.00 0.00,189.00 0.00,189.00
             0.00,189.00 0.00,58.00 0.00,58.00
             0.00,58.00 27.00,57.00 27.00,57.00
             27.00,57.00 6.00,56.00 6.00,56.00
             6.00,56.00 61.00,48.27 61.00,48.27 Z" />
                    <path id="Selezione" fill="red" stroke="transparent" stroke-width="1" fill-opacity="0.7" d="M 362.00,3.00
           C 362.00,3.00 361.00,4.00 361.00,4.00
             361.00,4.00 361.00,3.00 361.00,3.00
             361.00,3.00 362.00,3.00 362.00,3.00 Z
           M 314.00,10.00
           C 314.00,10.00 313.00,11.00 313.00,11.00
             313.00,11.00 313.00,10.00 313.00,10.00
             313.00,10.00 314.00,10.00 314.00,10.00 Z
           M 272.00,18.00
           C 272.00,18.00 266.00,17.00 266.00,17.00
             266.00,17.00 272.00,18.00 272.00,18.00 Z
           M 265.00,19.00
           C 265.00,19.00 260.00,18.00 260.00,18.00
             260.00,18.00 265.00,19.00 265.00,19.00 Z
           M 259.00,20.00
           C 259.00,20.00 251.00,20.00 251.00,20.00
             251.00,20.00 259.00,20.00 259.00,20.00 Z
           M 246.00,20.00
           C 246.00,20.00 245.00,21.00 245.00,21.00
             245.00,21.00 245.00,20.00 245.00,20.00
             245.00,20.00 246.00,20.00 246.00,20.00 Z
           M 197.00,28.00
           C 197.00,28.00 196.00,29.00 196.00,29.00
             196.00,29.00 196.00,28.00 196.00,28.00
             196.00,28.00 197.00,28.00 197.00,28.00 Z
           M 47.00,50.00
           C 47.00,50.00 46.00,51.00 46.00,51.00
             46.00,51.00 46.00,50.00 46.00,50.00
             46.00,50.00 47.00,50.00 47.00,50.00 Z
           M 19.00,57.00
           C 19.00,57.00 31.00,57.96 31.00,57.96
             31.00,57.96 45.00,57.96 45.00,57.96
             45.00,57.96 57.00,58.96 57.00,58.96
             57.00,58.96 73.00,58.96 73.00,58.96
             73.00,58.96 85.00,59.96 85.00,59.96
             85.00,59.96 101.00,59.96 101.00,59.96
             101.00,59.96 118.00,61.04 118.00,61.04
             118.00,61.04 133.00,61.04 133.00,61.04
             133.00,61.04 145.00,62.00 145.00,62.00
             145.00,62.00 185.00,63.00 185.00,63.00
             185.00,63.00 200.00,64.00 200.00,64.00
             200.00,64.00 239.00,65.00 239.00,65.00
             239.00,65.00 253.00,66.00 253.00,66.00
             253.00,66.00 267.00,66.00 267.00,66.00
             267.00,66.00 283.00,67.04 283.00,67.04
             283.00,67.04 299.00,67.04 299.00,67.04
             299.00,67.04 311.00,68.04 311.00,68.04
             311.00,68.04 326.00,68.04 326.00,68.04
             326.00,68.04 337.00,69.00 337.00,69.00
             337.00,69.00 351.00,69.00 351.00,69.00
             351.00,69.00 361.00,70.05 361.00,70.05
             361.00,70.05 371.72,70.05 371.72,70.05
             371.72,70.05 394.00,72.00 394.00,72.00
             394.00,72.00 410.00,72.00 410.00,72.00
             410.00,72.00 398.02,112.00 398.02,112.00
             398.02,112.00 387.23,147.91 387.23,147.91
             387.23,147.91 374.00,189.00 374.00,189.00
             374.00,189.00 1.00,189.00 1.00,189.00
             1.00,189.00 1.00,57.00 1.00,57.00
             1.00,57.00 19.00,57.00 19.00,57.00 Z" />
                </svg>
            </div>
        </div>
    </div>
</body>

</html>